!function(){function e(e,n){e.when("/",{templateUrl:"/home/home.view.html",controller:"homeCtrl"}).when("/register",{templateUrl:"/authentication/register/register.view.html",controller:"registerCtrl"}).when("/login",{templateUrl:"/authentication/login/login.view.html",controller:"loginCtrl"}).when("/profile",{templateUrl:"/profile/profile/profile.view.html",controller:"profileCtrl"}).otherwise({redirectTo:"/"}),n.html5Mode(!0)}function n(e,n,t){e.$on("$routeChangeStart",function(e,o,r){"/profile"!==n.path()||t.isLoggedIn()||n.path("/")})}angular.module("plan",["ui.bootstrap","ngRoute"]),angular.module("plan").config(["$routeProvider","$locationProvider",e]).run(["$rootScope","$location","authentication",n])}(),function(){function e(){}angular.module("plan").controller("homeCtrl",e)}(),function(){function e(e,n,t){n.credentials={email:"",password:""},n.onSubmit=function(){t.login(n.credentials).error(function(e){alert(e.message)}).then(function(){e.path("/")})}}angular.module("plan").controller("loginCtrl",e),e.$inject=["$location","$scope","authentication"]}(),function(){function e(e,n,t){n.errorPresent=!1,n.errorMsg=[],n.credentials={username:"",email:"",password:"",confirmPass:""};var o=function(e){console.log("Registration failed due to incorrect field values"),n.errorPresent=!0,n.errorMsg=e.errorMessage};n.onSubmit=function(){console.log("Checking registration..."),t.register(n.credentials).error(o).then(function(){e.path("profile"),console.log("Submitting registration")})}}angular.module("plan").controller("registerCtrl",e),e.$inject=["$location","$scope","authentication"]}(),function(){function e(e,n){var t=function(e){n.localStorage.token=e},o=function(){return n.localStorage.token},r=function(){var e,t=o();return!!t&&(e=t.split(".")[1],e=n.atob(e),e=JSON.parse(e),e.exp>Date.now()/1e3)},i=function(){if(r()){var e=o(),t=e.split(".")[1];return t=n.atob(t),t=JSON.parse(t),{email:t.email,name:t.username}}},l=function(n){return e.post("/api/register",n).success(function(e){t(e.token)})},a=function(n){return e.post("/api/login",n).success(function(e){t(e.token)})},c=function(){n.localStorage.removeItem("token")};return{currentUser:i,saveToken:t,getToken:o,isLoggedIn:r,register:l,login:a,logout:c}}angular.module("plan").service("authentication",e),e.$inject=["$http","$window"]}(),function(){function e(e,n){var t=function(){return e.get("/api/profile",{headers:{Authorization:"Bearer "+n.getToken()}})};return{getProfile:t}}angular.module("plan").service("plan",e),e.$inject=["$http","authentication"]}(),function(){function e(e,n,t){n.id;e.user={},t.getProfile().success(function(n){e.user=n,e.myProfile=!0}).error(function(e){console.log(e)})}angular.module("plan").controller("profileCtrl",e),e.$inject=["$scope","$routeParams","$route","$uibModal","planData"]}();